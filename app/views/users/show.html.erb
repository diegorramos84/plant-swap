<% if @user == current_user %>
  <h1 class="text-center mb-5 mt-5"><i class="fa-solid fa-seedling"></i><%="Hi #{@user.first_name}! Welcome to your profile"%> <i class="fa-solid fa-seedling"></i></h1>
  <h3>Your Average Rating: <%= @user.average_rating %> </h3>
<% else %>
  <h1><%= @user.first_name %>'s profile</h1>
  <h3>Rating: <%= @user.average_rating %> </h3>
<% end %>
<hr>

  <div class="your-garden">
    <% if @user == current_user %>
      <h1 class="text-center mb-5 mt-5"><i class="fa-solid fa-leaf"></i><i class="fa-solid fa-leaf"></i> Your garden <i class="fa-solid fa-leaf"></i><i class="fa-solid fa-leaf"></i></h1>
    <% else %>
      <h2><%= @user.first_name %>'s garden</h2>
    <% end %>
  </div>
  <div class="row justify-content-center">
    <% @user.plants.each do |plant| %>
      <div class="col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3">
        <%= link_to plant_path(plant), class: "text-decoration-none" do %>
            <div class="plant-card-garden mb-3">
              <div class="plant-picture">
                <% if plant.photo.attached? %>
                  <%= cl_image_tag plant.photo.key, height: 250, width: 300 %>
                <% end %>
              </div>
        <% end %>
            <div class="plant-info">
              <p><strong>Plant name: </strong><%= plant.common_name %></p>
              <p><strong>Plant type: </strong><%= plant.plant_type %></p>
              <p><strong>Amount of plants left: </strong><%= plant.quantity%></p>
              <div class="garder-user-actions">
                <% if plant.user == current_user %>
                  <%= link_to edit_plant_path(plant) do %>
                    <i class="fa-solid fa-pen-to-square"></i>
                  <% end %>
                  <%= link_to plant_path(plant), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} do %>
                    <i class="fa-solid fa-trash-can"></i>
                  <% end %>
                <% end %>
              </div>
            </div>
          </div>
      </div>
    <% end %>
  </div>

<h2>Reviews</h2>

<% @user.plants.each do |plant| %>
  <% plant.bookings.each do |booking| %>
    <p><%= booking.id %></p>

    <% if booking.review != nil %>
      <p><%= booking.review.id %></p>
      <p>Rating: <%= booking.review.rating.to_i %></p>
      <p><%= booking.review.content %></p>
    <% else %>
      <p>No reviews exist</p>
    <% end %>
  <% end %>
<% end %>
